@import "@ngrok/mantle/mantle.css";
@plugin "@tailwindcss/typography";
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
	:root {
		--background: 0 0% 100%;
		--foreground: 240 10% 3.9%;
		--foreground-lighter: 240 5% 64.9%;
		--foreground-muted: 240 3.8% 46.1%;
		--border: 240 5.9% 90%;
		--border-strong: 240 5.9% 80%;
		--brand: var(--blue-600);
		--brand-link: var(--blue-600);
		--accent: 240 4.8% 95.9%;
		--accent-foreground: 240 5.9% 10%;
		--surface-100: 240 4.8% 95.9%;
		--surface-300: 240 4.8% 90%;
		--border-input: 240 5.9% 90%;
		--ring: 240 5% 64.9%;
		--header-height: 4rem;
	}

	.dark {
		--background: 240 10% 3.9%;
		--foreground: 0 0% 98%;
		--foreground-lighter: 240 5% 64.9%;
		--foreground-muted: 240 3.8% 46.1%;
		--border: 240 3.7% 15.9%;
		--border-strong: 240 3.7% 20%;
		/* --brand: 142 76% 36%; */
		--brand: var(--blue-600);
		/* --brand-link: 142 76% 36%; */
		--brand-link: var(--blue-600);
		--accent: 240 3.7% 15.9%;
		--accent-foreground: 0 0% 98%;
		--surface-100: 240 3.7% 15.9%;
		--surface-300: 240 3.7% 20%;
		--border-input: 240 3.7% 15.9%;
		--ring: 240 5% 64.9%;
	}

	.dark-high-contrast {
		--background: 0 0% 0%;
		--foreground: 0 0% 100%;
		--foreground-lighter: 0 0% 75%;
		--foreground-muted: 0 0% 60%;
		--border: 0 0% 25%;
		--border-strong: 0 0% 35%;
		--brand: 142 76% 50%;
		--brand-link: 142 76% 50%;
		--accent: 0 0% 15%;
		--accent-foreground: 0 0% 100%;
		--surface-100: 0 0% 15%;
		--surface-300: 0 0% 25%;
		--border-input: 0 0% 25%;
		--ring: 0 0% 75%;
	}

	.light-high-contrast {
		--background: 0 0% 100%;
		--foreground: 0 0% 0%;
		--foreground-lighter: 0 0% 25%;
		--foreground-muted: 0 0% 40%;
		--border: 0 0% 75%;
		--border-strong: 0 0% 65%;
		--brand: 142 76% 30%;
		--brand-link: 142 76% 30%;
		--accent: 0 0% 85%;
		--accent-foreground: 0 0% 0%;
		--surface-100: 0 0% 85%;
		--surface-300: 0 0% 75%;
		--border-input: 0 0% 75%;
		--ring: 0 0% 25%;
	}

	/* Inline code styling - must be inline on initial load */
	.inline-code {
		display: inline !important;
		white-space: nowrap !important;
		margin: 0 !important;
		padding: 0.125rem 0.25rem !important;
		font-size: 0.875em;
		border-radius: 0.25rem;
		background-color: hsl(var(--surface-100));
		border: 1px solid hsl(var(--border));
	}

	/* Override prose spacing for code blocks */
	.prose .not-prose {
		margin-top: 0 !important;
	}

	.prose .heading-anchor {
		color: inherit !important;
		text-decoration: none !important;
		font-weight: normal !important;
	}

	html {
		overflow-x: hidden;
		scrollbar-gutter: stable;
	}

	body {
		overflow-x: hidden;
		max-width: 100vw;
		scrollbar-gutter: stable;
	}

	* {
		max-width: 100%;
	}

	p {
		margin-bottom: 0.6rem;
	}

	/* Required for Vike-React */
	#root {
		height: 100vh;
	}

	/* Ensure all content stays within viewport */
	.prose {
		max-width: none;
		word-wrap: break-word;
		overflow-wrap: break-word;
		hyphens: auto;
	}

	/* Enhanced table wrapper for Supabase-style tables */
	.table-wrapper {
		width: 100%;
		max-width: 100%;
		margin: 1.5rem 0;
		border: 1px solid hsl(var(--border));
		border-radius: 0.5rem;
		overflow: hidden;
		background: hsl(var(--background));
		box-shadow:
			0 1px 3px 0 hsl(var(--border) / 0.1),
			0 1px 2px 0 hsl(var(--border) / 0.06);
	}

	.table-wrapper table {
		width: 100%;
		border-collapse: collapse;
		margin: 0;
		border: none;
	}

	.table-wrapper table th {
		background-color: hsl(var(--surface-100));
		color: hsl(var(--foreground));
		font-weight: 600;
		text-align: left;
		padding: 0.75rem 1rem;
		border-bottom: 2px solid hsl(var(--border-strong));
		font-size: 0.875rem;
		letter-spacing: 0.025em;
	}

	.table-wrapper table td {
		padding: 0.75rem 1rem;
		color: hsl(var(--foreground));
		vertical-align: top;
		border-bottom: 1px solid hsl(var(--border));
	}

	.table-wrapper table tbody tr {
		background-color: hsl(var(--background));
		transition: background-color 0.15s ease;
	}

	.table-wrapper table tbody tr:nth-child(even) {
		background-color: hsl(var(--surface-100) / 0.3);
	}

	.table-wrapper table tbody tr:hover {
		background-color: hsl(var(--surface-100) / 0.5);
	}

	.table-wrapper table tbody tr:last-child td {
		border-bottom: none;
	}

	/* Mobile-first responsive table styles */
	@media (max-width: 768px) {
		.responsive-table table,
		.responsive-table thead,
		.responsive-table tbody,
		.responsive-table th,
		.responsive-table td,
		.responsive-table tr {
			display: block;
		}

		.responsive-table thead {
			position: absolute;
			top: -9999px;
			left: -9999px;
		}

		.responsive-table tr {
			border: 1px solid hsl(var(--border));
			margin-bottom: 0.5rem;
			padding: 0.75rem;
			background: hsl(var(--background));
			border-radius: 0.375rem;
		}

		.responsive-table tr:last-child {
			margin-bottom: 0;
		}

		.responsive-table td {
			border: none !important;
			position: relative;
			padding: 0.5rem 0 0.5rem 40% !important;
			text-align: left !important;
			white-space: normal;
			word-wrap: break-word;
		}

		.responsive-table td:before {
			content: attr(data-label) ": ";
			position: absolute;
			left: 0;
			width: 35%;
			padding-right: 0.5rem;
			white-space: nowrap;
			font-weight: 600;
			color: hsl(var(--foreground));
		}

		.responsive-table td:empty:before {
			content: "";
		}
	}

	/* Desktop table styles */
	@media (min-width: 769px) {
		.table-wrapper {
			overflow-x: auto;
			-webkit-overflow-scrolling: touch;
		}
	}

	/* Prevent code blocks from overflowing */
	code {
		max-width: 100%;
		overflow-x: auto;
		word-wrap: break-word;
		white-space: pre-wrap;
	}

	/* Ensure images don't overflow */
	img {
		max-width: 100%;
		height: auto;
	}

	/* Prose styling for theme compatibility */
	.prose {
		color: hsl(var(--foreground));
	}

	.prose h1,
	.prose h2,
	.prose h3,
	.prose h4,
	.prose h5,
	.prose h6 {
		color: hsl(var(--foreground));
	}

	.prose p {
		color: hsl(var(--foreground));
		margin-bottom: 1.1rem !important;
		margin-top: 0 !important;
		line-height: 1.7rem;
	}

	.prose strong {
		color: hsl(var(--foreground));
	}

	.prose a {
		color: hsl(var(--brand-link));
	}

	.prose a:hover {
		color: hsl(var(--brand));
	}

	.prose code {
		color: hsl(var(--foreground));
	}

	.prose blockquote {
		color: hsl(var(--foreground-muted));
		border-left-color: hsl(var(--border));
	}

	.prose hr {
		border-color: hsl(var(--border));
	}

	/* Supabase-style table styling */
	.prose table {
		color: hsl(var(--foreground));
		border-collapse: collapse;
		width: 100%;
		margin: 1.5rem 0;
		font-size: 0.95em;
		border-radius: 0.5rem;
		overflow: hidden;
		border: 1px solid hsl(var(--border));
	}

	.prose thead {
		color: hsl(var(--foreground));
	}

	.prose thead th {
		background-color: hsl(var(--surface-100));
		color: hsl(var(--foreground));
		font-weight: 600;
		text-align: left;
		padding: 0.75rem 1rem;
		border-bottom: 2px solid hsl(var(--border-strong));
		font-size: 0.875rem;
		letter-spacing: 0.025em;
	}

	.prose tbody td {
		padding: 0.75rem 1rem;
		color: hsl(var(--foreground));
		vertical-align: top;
		border-bottom: 1px solid hsl(var(--border));
	}

	.prose tbody tr {
		border-bottom: none;
		background-color: hsl(var(--background));
		transition: background-color 0.15s ease;
	}

	.prose tbody tr:nth-child(even) {
		background-color: hsl(var(--surface-100) / 0.3);
	}

	.prose tbody tr:hover {
		background-color: hsl(var(--surface-100) / 0.5);
	}

	.prose tbody tr:last-child td {
		border-bottom: none;
	}

	/* Code elements within tables */
	.prose table code {
		background-color: hsl(var(--surface-100));
		color: hsl(var(--foreground));
		padding: 0.125rem 0.25rem;
		border-radius: 0.25rem;
		font-size: 0.875em;
		border: 1px solid hsl(var(--border));
	}

	.prose ul > li::marker,
	.prose ol > li::marker {
		color: hsl(var(--foreground-muted));
	}

	.prose ul > li,
	.prose ol > li {
		color: hsl(var(--foreground));
	}
	/**************************************************************************
	 * Cards
	 */
	.ngrok--cards {
		margin-bottom: 20px;
	}

	.ngrok--cards-flex {
		display: flex;
		flex-direction: column;
		flex-wrap: wrap;
		gap: 20px;
	}

	.ngrok--cards-row {
		flex-direction: row;
	}

	.ngrok--cards > a,
	.ngrok--cards > a:hover,
	.ngrok--cards > a:focus {
		border-radius: 6px;
		color: inherit;
		display: flex;
		flex-direction: column;
		flex: 1;
		text-decoration: none;
	}

	.ngrok--card {
		border-radius: 6px;
		border: 1px solid var(--ifm-toc-border-color);
		display: flex;
		flex-direction: column;
		flex: 1 1 0%;
		gap: 1em;
		padding: 20px;
		text-decoration: none;
		transition: border-color 0.2s;
	}

	.ngrok--card:hover,
	.ngrok--card:focus {
		text-decoration: none;
	}

	a:hover .ngrok--card {
		border: 1px solid var(--ifm-hr-background-color);
	}

	a .ngrok--card svg {
		fill: #000000;
	}

	[data-theme="dark"] a:hover .ngrok--card {
		border-color: #6d747e;
	}

	[data-theme="dark"] a .ngrok--card svg {
		fill: #ffffff !important;
	}

	.ngrok--card-lg {
		padding: 40px;
	}

	.ngrok--card-md {
		padding: 32px;
	}

	.ngrok--card-sm {
		padding: 16px;
	}

	.ngrok--card-note {
		background-color: var(--ifm-footer-background-color);
		display: flex;
		flex-direction: row;
		gap: 20px;
	}

	.ngrok--card-heading {
		display: flex;
		flex-direction: row;
		gap: 20px;
		text-decoration: none;
	}

	.ngrok--card-heading:hover,
	.ngrok--card-heading:focus {
		text-decoration: none;
	}

	.ngrok--card-heading svg {
		width: 32px;
		height: 32px;
	}

	.ngrok--card-sm .ngrok--card-heading svg {
		width: 24px;
		height: 24px;
	}

	.ngrok--card > img {
		max-height: 32px;
		width: max-content;
		display: block;
		margin: 0 auto;
	}

	.ngrok--card * {
		margin-bottom: 0;
	}

	.ngrok--card a {
		font-weight: 600;
	}

	.ngrok--card:hover > a {
		text-decoration: underline;
	}

	@media (max-width: 680px) {
		.ngrok--cards-row {
			flex-direction: column;
		}
	}
}
