import TabItem from "@theme/TabItem";
import Tabs from "@theme/Tabs";

### Install the Operator

While you can pass the credential values directly via helm values like the below simple example shows, we do not recommend this for production scenarios.
Instead, we recommend creating a Kubernetes secret and passing the secret name to the helm chart.
This allows for easier infrastructure as code and prevents users with access to the cluster from viewing the API key and auth token using commands like `helm get values`.
Select one of the below options based on which method you are comfortable with.

<Tabs groupId="k8s" queryString="k8s-install">
	<TabItem value="simple" label="Simple Method" default>
		```bash
		helm install ngrok-operator ngrok/ngrok-operator \
		--namespace $NAMESPACE \
		--create-namespace \
		--set credentials.apiKey=$NGROK_API_KEY \
		--set credentials.authtoken=$NGROK_AUTHTOKEN
		```
	</TabItem>
	<TabItem value="secure" label="More Secure Method">
		First, prepare the Secret for your credentials

    	```bash
    	export ENCODED_NGROK_AUTHTOKEN=$(echo -n "$NGROK_AUTHTOKEN" | base64)
    	export ENCODED_NGROK_API_KEY=$(echo -n "$NGROK_API_KEY" | base64)
    	kubectl apply -f -<<EOF
    	apiVersion: v1
    	kind: Secret
    	metadata:
    		name: ngrok-operator-credentials
    		namespace: $NAMESPACE
    	data:
    		API_KEY: "$ENCODED_NGROK_API_KEY"
    		AUTHTOKEN: "$ENCODED_NGROK_AUTHTOKEN"
    	EOF
    	```

    	Next, install the operator

    	```bash
    	helm install ngrok-operator ngrok/ngrok-operator \
    	--namespace $NAMESPACE \
    	--create-namespace \
    	--set credentials.secret.name=ngrok-operator-credentials \
    	```
    	</TabItem>

</Tabs>
